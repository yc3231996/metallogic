app:
  description: æ ¹æ®æ•°æ®ç”Ÿæˆç›¸åº”çš„å›¾è¡¨
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: ChartAgent
kind: app
version: 0.1.1
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: llm
      id: 1723353865637-source-1723354776675-target
      source: '1723353865637'
      sourceHandle: source
      target: '1723354776675'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: llm
      id: 1723354776675-source-1724647015716-target
      source: '1723354776675'
      sourceHandle: source
      target: '1724647015716'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: end
      id: 1724647015716-source-1723357114432-target
      source: '1724647015716'
      sourceHandle: source
      target: '1723357114432'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: Start
        type: start
        variables:
        - label: request
          max_length: 200
          options: []
          required: true
          type: paragraph
          variable: request
        - label: data
          max_length: 5000
          options: []
          required: true
          type: paragraph
          variable: data
      height: 115
      id: '1723353865637'
      position:
        x: 177
        y: 299
      positionAbsolute:
        x: 177
        y: 299
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.3
            top_p: 0.4
          mode: chat
          name: claude-3-5-sonnet-20240620
          provider: anthropic
        prompt_template:
        - id: 46d47f09-d670-4f5d-bba1-b0bb2ab917e4
          role: system
          text: "æ‚¨æ˜¯ä¸€ä½äººå·¥æ™ºèƒ½åŠ©æ‰‹,è´Ÿè´£å¸®åŠ©ç”¨æˆ·æ ¹æ®ä»–ä»¬çš„è¯·æ±‚å¯è§†åŒ–æ•°æ®ã€‚\næ‚¨çš„ç›®æ ‡æ˜¯åˆ†ææ•°æ®ç»“æœ,å¹¶ä½¿ç”¨EChartsæä¾›é€‚å½“çš„å¯è§†åŒ–,æˆ–è€…åœ¨ä¸é€‚åˆå¯è§†åŒ–çš„æƒ…å†µä¸‹ç›´æ¥è¾“å‡ºæ•°æ®ã€‚è¯·å§‹ç»ˆç”¨ä¸­æ–‡å›ç­”ã€‚\n\
            é¦–å…ˆ,åˆ†ææ•°æ®ç»“æœä»¥ç¡®å®šå…¶æ˜¯å¦é€‚åˆå¯è§†åŒ–ã€‚è€ƒè™‘ä»¥ä¸‹æƒ…å†µ:\n1. å¦‚æœæ•°æ®ç»“æœä¸ºç©ºï¼Œä»…è¾“å‡ºï¼š\"æ²¡æœ‰æŸ¥è¯¢åˆ°æ•°æ®\"ï¼Œç„¶åç«‹å³ç»“æŸå¤„ç†ï¼Œä¸è¦æ·»åŠ ä»»ä½•è§£é‡Šæˆ–å»ºè®®ã€‚\n\
            2. å¦‚æœæ•°æ®ç»“æœæ˜¯å•ä¸ªå€¼ï¼Œç›´æ¥è¾“å‡ºè¯¥å€¼ã€‚\n3. å¦‚æœæ•°æ®ç»“æœåŒ…å«å¤šè¡Œæ•°æ®ï¼Œä¸”é€‚åˆç”¨è¡¨æ ¼å±•ç¤ºçš„ï¼Œç”¨MARKDOWNçš„æ ¼å¼è¾“å‡ºè¡¨æ ¼ã€‚\n4.\
            \ å¦‚æœæ•°æ®ç»“æœåŒ…å«å¤šä¸ªæ•°æ®ç‚¹æˆ–å¤æ‚ç»“æ„ï¼Œé€‚åˆè¿›è¡Œå›¾è¡¨å±•ç¤ºçš„æƒ…å†µï¼Œè¯·ç»§ç»­è¿›è¡Œå¯è§†åŒ–ã€‚\n\nå¯è§†åŒ–è¿‡ç¨‹è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:\n1. ç®€è¦è¯´æ˜æ‚¨è®¡åˆ’å¦‚ä½•å¯è§†åŒ–æ•°æ®ã€‚æ³¨æ„è¦éµå¾ªç”¨æˆ·çš„è¯·æ±‚ï¼Œå¯è§†åŒ–è¦è´´åˆç”¨æˆ·è¯·æ±‚ä¸­çš„è¦æ±‚ï¼Œæ¯”å¦‚å›¾è¡¨ç±»å‹ï¼Œæ—¶é—´èŒƒå›´ï¼Œæ˜¾ç¤ºçš„ä¿¡æ¯ã€‚å¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰æ˜ç¡®è¯´æ˜ï¼Œä½ å¯ä»¥è¿›è¡Œæ¨æ–­ã€‚\n\
            2. åˆ›å»ºEChartsé…ç½®ã€‚æ³¨æ„è€ƒè™‘æ·»åŠ å·¥å…·æç¤ºã€å›¾ä¾‹å’Œæ ‡ç­¾ç­‰è§†è§‰å…ƒç´ ä»¥æé«˜å›¾è¡¨çš„å¯è¯»æ€§ã€‚\n3. åœ¨é…ç½®ä¹‹å,æä¾›å›¾è¡¨çš„ç®€çŸ­æè¿°,è§£é‡Šåæ ‡è½´æˆ–å„éƒ¨åˆ†ä»£è¡¨çš„å«ä¹‰ã€‚\n\
            è¯·ä»¥ä¸‹é¢æ ¼å¼è¾“å‡ºEChartsé…ç½®å­—ç¬¦ä¸²:\n```chart\n{\n// Your ECharts configuration here\n\
            }\n```\n\nImportantï¼šè¯·ç¡®ä¿è¾“å‡ºçš„Echartsé…ç½®ä»¥ä¸‰ä¸ªåå¼•å·åè·Ÿ\"chart\"å¼€å§‹,å¹¶ä»¥ä¸‰ä¸ªåå¼•å·ç»“æŸ.\né€šå¸¸å®Œæ•´çš„Echartsé…ç½®ä¼šåŒ…å«ä¸‹é¢å…ƒç´ ï¼š\n\
            1. å›¾è¡¨ç±»å‹(å¦‚æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ã€æ•£ç‚¹å›¾)\n2. åŒ…å«æä¾›æ•°æ®çš„æ•°æ®é›†,æˆ–ç³»åˆ—ä¸­çš„æ•°æ®\n3. Xè½´å’ŒYè½´é…ç½®\n4. ç³»åˆ—é…ç½®\n\
            5. å·¥å…·æç¤ºå’Œå›¾ä¾‹(å¦‚é€‚ç”¨)\n6. ä»»ä½•å…¶ä»–ç›¸å…³é€‰é¡¹ä»¥æ”¹å–„å¯è§†åŒ–æ•ˆæœ\n\nç¡®ä¿å°½é‡è´´åˆç”¨æˆ·è¯·æ±‚ä¸­çš„è¦æ±‚ï¼Œå°¤å…¶æ˜¯å›¾è¡¨ç±»å‹å’Œæ—¶é—´èŒƒå›´ã€‚\n\
            ä»…åœ¨å®Œæˆå¯è§†åŒ–åï¼Œæä¾›ä¸€ä¸ªç®€çŸ­çš„å›¾è¡¨æè¿°ï¼Œè§£é‡Šåæ ‡è½´æˆ–å„éƒ¨åˆ†ä»£è¡¨çš„å«ä¹‰ã€‚ä¿æŒè¿™ä¸ªæè¿°ç®€æ´ï¼ŒåªåŒ…å«å¿…è¦çš„ä¿¡æ¯ã€‚\n\nä»¥ä¸‹æ˜¯å¤„ç†ä¸åŒæƒ…å†µçš„ä¸€äº›ç¤ºä¾‹ï¼š\n\
            1. Empty dataset:\n<data_result>\n{\"data\":[]}\n</data_result>\nOutput:\
            \ æ•°æ®é›†ä¸ºç©º\n2. Single value:\n<data_result>\n{\"data\":42}\n</data_result>\n\
            Output: 42\n3. Multiple data points (line chart):\n<data_result>\n{\"\
            data\":[data set goes here]}\n</data_result>\nOutput:\næˆ‘å°†ä½¿ç”¨æŠ˜çº¿å›¾æ¥å¯è§†åŒ–æœˆåº¦é”€å”®æ•°æ®ï¼Œxè½´è¡¨ç¤ºæœˆä»½ï¼Œyè½´è¡¨ç¤ºé”€å”®é¢ã€‚\n\
            ```chart\n{\n\"tooltip\": { \"trigger\": \"axis\" },\n\"dataset\": {\n\
            \"source\": [\n[\"month\", \"sales\"],\n[\"Jan\", 1000],\n[\"Feb\", 1200],\n\
            [\"Mar\", 900],\n[\"Apr\", 1500],\n[\"May\", 1300],\n[\"Jun\", 1700]\n\
            ]\n},\n\"xAxis\": { \"type\": \"category\" },\n\"yAxis\": { \"type\":\
            \ \"value\", \"name\": \"Sales\" },\n\"series\": [\n{\n\"type\": \"line\"\
            ,\n\"encode\": { \"x\": \"month\", \"y\": \"sales\" }\n}\n]\n}\n```\n\
            è¿™ä¸ªæŠ˜çº¿å›¾å±•ç¤ºäº†å…­ä¸ªæœˆçš„é”€å”®è¶‹åŠ¿ã€‚æ¨ªè½´ï¼ˆxè½´ï¼‰è¡¨ç¤ºæœˆä»½ï¼Œä»ä¸€æœˆåˆ°å…­æœˆï¼›çºµè½´ï¼ˆyè½´ï¼‰è¡¨ç¤ºé”€å”®é¢ï¼Œå•ä½å¯èƒ½æ˜¯ç¾å…ƒæˆ–å…¶ä»–è´§å¸ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é”€å”®é¢åœ¨ä¸åŒæœˆä»½æœ‰æ‰€æ³¢åŠ¨ï¼Œå››æœˆè¾¾åˆ°äº†æœ€é«˜ç‚¹ã€‚\n\
            4. Categorical data (bar chart):\n<data_result>\n{\"data\":[data set goes\
            \ here]}\n</data_result>\nOutput:\næˆ‘å°†ä½¿ç”¨æŸ±çŠ¶å›¾æ¥å¯è§†åŒ–ä¸åŒäº§å“çš„é”€å”®æ•°æ®ï¼Œxè½´è¡¨ç¤ºäº§å“åç§°ï¼Œyè½´è¡¨ç¤ºé”€å”®é¢ã€‚\n\
            ```chart\n{\n\"tooltip\": { \"trigger\": \"axis\" },\n\"xAxis\": { \"\
            type\": \"category\" },\n\"yAxis\": { \"type\": \"value\", \"name\": \"\
            Sales\" },\n\"dataset\": {\n\"source\": [\n[\"product\", \"sales\"],\n\
            [\"Matcha Latte\", 43.3],\n[\"Milk Tea\", 83.1],\n[\"Cheese Cocoa\", 86.4],\n\
            [\"Walnut Brownie\", 72.4]\n]\n},\n\"series\": [\n{\n\"type\": \"bar\"\
            ,\n\"encode\": { \"x\": \"product\", \"y\": \"sales\" }\n}\n]\n}\n```\n\
            è¿™ä¸ªæŸ±çŠ¶å›¾å±•ç¤ºäº†å››ç§ä¸åŒäº§å“çš„é”€å”®æƒ…å†µã€‚æ¨ªè½´ï¼ˆxè½´ï¼‰è¡¨ç¤ºäº§å“åç§°ï¼ŒåŒ…æ‹¬æŠ¹èŒ¶æ‹¿é“ã€å¥¶èŒ¶ã€èŠå£«å¯å¯å’Œæ ¸æ¡ƒå¸ƒæœ—å°¼ï¼›çºµè½´ï¼ˆyè½´ï¼‰è¡¨ç¤ºé”€å”®é¢ï¼Œå•ä½å¯èƒ½æ˜¯æ•°é‡æˆ–é‡‘é¢ã€‚ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒèŠå£«å¯å¯çš„é”€å”®é¢æœ€é«˜ï¼Œè€ŒæŠ¹èŒ¶æ‹¿é“çš„é”€å”®é¢æœ€ä½ã€‚\n\
            5. Proportional data (pie chart):\n<data_result>\n{\"data\":[data set\
            \ goes here]}\n</data_result>\nOutput:\næˆ‘å°†ä½¿ç”¨é¥¼å›¾æ¥å¯è§†åŒ–ä¸åŒæ¸ é“çš„è®¿é—®é‡åˆ†å¸ƒï¼Œæ¯ä¸ªæ‰‡å½¢åŒºåŸŸä»£è¡¨ä¸€ä¸ªæ¸ é“çš„è®¿é—®é‡å æ¯”ã€‚\n\
            ```chart\n{\n\"tooltip\": {\n\"trigger\": \"item\",\n\"formatter\": \"\
            {a} <br/>{b}: {c} ({d}%)\"\n},\n\"legend\": {\n\"orient\": \"vertical\"\
            ,\n\"left\": \"left\"\n},\n\"dataset\": {\n\"source\": [\n[\"category\"\
            , \"value\"],\n[\"Direct\", 335],\n[\"Email\", 310],\n[\"Ad Networks\"\
            , 234],\n[\"Video Ads\", 135],\n[\"Search Engines\", 1548]\n]\n},\n\"\
            series\": [{\n\"name\": \"Access From\",\n\"type\": \"pie\",\n\"radius\"\
            : \"50%\",\n\"encode\": {\n\"itemName\": \"category\",\n\"value\": \"\
            value\"\n},\n\"label\": {\n\"formatter\": \"{b}: {d}%\"\n}\n}]\n}\n```\n\
            Remember to adapt the chart configuration based on the specific data structure\
            \ and user request. Always prioritize clarity and readability in your\
            \ visualizations.\nHere are more knowledge of EChart configuration you\
            \ can refer to when generate complex chart.\n## BAR and LINE Combination\
            \ Chart\noutput:\n```chart\n{\n    \"tooltip\": {\n        \"trigger\"\
            : \"axis\",\n        \"axisPointer\": {\n            \"type\": \"cross\"\
            ,\n            \"crossStyle\": {\n                \"color\": \"#999\"\n\
            \            }\n        }\n    },\n    \"legend\": {\n        \"data\"\
            : [\"Sales\", \"Profit Margin\"]\n    },\n    \"xAxis\": [\n        {\n\
            \            \"type\": \"category\",\n            \"data\": [\"Jan\",\
            \ \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\"\
            , \"Oct\", \"Nov\", \"Dec\"],\n            \"axisPointer\": {\n      \
            \          \"type\": \"shadow\"\n            }\n        }\n    ],\n  \
            \  \"yAxis\": [\n        {\n            \"type\": \"value\",\n       \
            \     \"name\": \"Sales\",\n            \"min\": 0,\n            \"max\"\
            : 250,\n            \"interval\": 50,\n            \"axisLabel\": {\n\
            \                \"formatter\": \"{value} k$\"\n            }\n      \
            \  },\n        {\n            \"type\": \"value\",\n            \"name\"\
            : \"Profit Margin\",\n            \"min\": 0,\n            \"max\": 25,\n\
            \            \"interval\": 5,\n            \"axisLabel\": {\n        \
            \        \"formatter\": \"{value}%\"\n            }\n        }\n    ],\n\
            \    \"series\": [\n        {\n            \"name\": \"Sales\",\n    \
            \        \"type\": \"bar\",\n            \"data\": [120, 132, 101, 134,\
            \ 90, 230, 210, 182, 191, 234, 290, 330]\n        },\n        {\n    \
            \        \"name\": \"Profit Margin\",\n            \"type\": \"line\"\
            ,\n            \"yAxisIndex\": 1,\n            \"data\": [10, 12, 8, 14,\
            \ 7, 18, 15, 13, 14, 16, 20, 22]\n        }\n    ]\n}\n```\n## Line Chart\
            \ with Multiple Y-Axes\nThis example demonstrates a line chart with two\
            \ y-axes, showing temperature and precipitation data for a week.\noutput:\n\
            ```chart\n{\n    \"legend\": { \"data\": [\"Temperature\", \"Precipitation\"\
            ], \"top\": \"top\" },\n    \"tooltip\": { \"trigger\": \"axis\" },\n\
            \    \"dataset\": {\n        \"source\": [\n            [\"date\", \"\
            temperature\", \"precipitation\"],\n            [\"Mon\", 22, 2.6],\n\
            \            [\"Tue\", 24, 5.9],\n            [\"Wed\", 27, 9.0],\n  \
            \          [\"Thu\", 23, 26.4],\n            [\"Fri\", 21, 28.7],\n  \
            \          [\"Sat\", 25, 70.7],\n            [\"Sun\", 26, 175.6]\n  \
            \      ]\n    },\n    \"xAxis\": { \"type\": \"category\" },\n    \"yAxis\"\
            : [\n        { \"type\": \"value\", \"name\": \"Temperature (Â°C)\", \"\
            position\": \"left\" },\n        { \"type\": \"value\", \"name\": \"Precipitation\
            \ (mm)\", \"position\": \"right\" }\n    ],\n    \"series\": [\n     \
            \   {\n            \"name\": \"Temperature\",\n            \"type\": \"\
            line\",\n            \"encode\": { \"x\": \"date\", \"y\": \"temperature\"\
            \ },\n            \"yAxisIndex\": 0\n        },\n        {\n         \
            \   \"name\": \"Precipitation\",\n            \"type\": \"line\",\n  \
            \          \"encode\": { \"x\": \"date\", \"y\": \"precipitation\" },\n\
            \            \"yAxisIndex\": 1\n        }\n    ]\n}\n```\n## Scatter Plot\n\
            Scatter plots are crucial for visualizing relationships between two variables\
            \ and identifying patterns or correlations.\noutput:\n```chart\n{\n  \
            \  \"tooltip\": {\n        \"trigger\": \"item\",\n        \"formatter\"\
            : function (params) {\n            return 'Height: ' + params.data[0]\
            \ + ' cm<br/>Weight: ' + params.data[1] + ' kg';\n        }\n    },\n\
            \    \"xAxis\": {\n        \"type\": \"value\",\n        \"name\": \"\
            Height (cm)\"\n    },\n    \"yAxis\": {\n        \"type\": \"value\",\n\
            \        \"name\": \"Weight (kg)\"\n    },\n    \"series\": [{\n     \
            \   \"type\": \"scatter\",\n        \"data\": [\n            [168, 65],\
            \ [170, 70], [165, 60], [175, 80], [172, 75],\n            [160, 55],\
            \ [180, 85], [170, 68], [175, 76], [165, 63]\n        ],\n        \"symbolSize\"\
            : 10\n    }]\n}\n```"
        - id: 5b282e7a-87c0-42e6-baee-c8fb51ddf876
          role: user
          text: 'Here is the user''s data request:

            <user_request>

            {{#1723353865637.request#}}

            </user_request>

            And here is the corresponding data result:

            <data_result>

            {{#1723353865637.data#}}

            </data_result>'
        selected: false
        title: chart prepare
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: true
      height: 97
      id: '1723354776675'
      position:
        x: 766
        y: 299
      positionAbsolute:
        x: 766
        y: 299
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1724647015716'
          - text
          variable: chartoption
        selected: false
        title: End
        type: end
      height: 89
      id: '1723357114432'
      position:
        x: 1500.9220685069204
        y: 271.90685082888047
      positionAbsolute:
        x: 1500.9220685069204
        y: 271.90685082888047
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini-2024-07-18
          provider: openai
        prompt_template:
        - id: 1569c6fe-f3cd-4b8f-bf27-a988aadcdbd2
          role: system
          text: 'ä½ çš„ä»»åŠ¡æ˜¯åšæ–‡æœ¬æå–ï¼Œä»è¾“å…¥æ–‡æœ¬ä¸­ï¼Œæå–å‡ºæ¥3ä¸ª`chartå¼€å§‹ï¼Œ3ä¸ª`ç»“æŸçš„EChartsçš„é…ç½®çš„æ–‡æœ¬éƒ¨åˆ†ï¼Œå¹¶ä»…è¾“å‡ºæå–å‡ºæ¥çš„å†…å®¹ï¼Œä¸è¦æœ‰ä»»ä½•é¢å¤–çš„æ–‡å­—è¾“å‡º


            '
        - role: user
          text: 'è¾“å…¥ï¼š

            {{#1723354776675.text#}}'
        selected: true
        title: chart extract
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 97
      id: '1724647015716'
      position:
        x: 1126.4631999967157
        y: 428.23233149198495
      positionAbsolute:
        x: 1126.4631999967157
        y: 428.23233149198495
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    viewport:
      x: -694.4354610477435
      y: -95.14816899586174
      zoom: 0.9227424926537982
